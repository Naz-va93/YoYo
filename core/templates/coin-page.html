{% extends 'base.html' %}
{% load i18n %}

{% block title %}
    <title>{{ page.title_seo }}</title>
{% endblock %}

{% block description %}
    <meta name="description" content="{{ page.description_seo }}">
{% endblock %}

{% load static %}
{% block content %}
    <main class="main">
        <section class="coin">
            <div class="hero-banner container">
                <div class="hero-banner__bg">
                    <picture class="hero__bg-picture-dark">
                        <source data-srcset="{% static 'img/index/hero/bg.webp' %}" type="image/webp"
                                media="(min-width: 550px)">
                        <source data-srcset="{% static 'img/index/hero/bg-mob-2.webp' %}" type="image/webp">
                        <img data-src="{% static 'img/index/hero/bg.png' %}" alt="" width="0" height="0" class="lazy">
                    </picture>
                    <picture class="hero__bg-picture-light">
                        <source data-srcset="{% static 'img/index/hero/bg-light.webp' %}" type="image/webp"
                                media="(min-width: 550px)">
                        <source data-srcset="{% static 'img/index/hero/bg-light.webp' %}" type="image/webp">
                        <img data-src="{% static 'img/index/hero/bg-light.png' %}" alt="" width="0" height="0"
                             class="lazy">
                    </picture>
                </div>
                <div class="hero-banner__page-address page-address">
                    <ul>
                        <li>
                            <a href="{% url 'core:index' %}">
                                {% trans "Home" %}
                            </a>
                        </li>
                        <li>
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <use xlink:href="{% static 'img/sprites.svg' %}#arrow-next"></use>
                            </svg>
                        </li>
                        <li>
                            <a href="#">
                                {% trans "Coin page" %}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="coin__container container">
                <div class="coin__header">
                    <div class="coin__avatar">
                        <picture>
                            <source srcset="{{ coin.photo_coin.url }}" type="image/webp">
                            <img src="{{ coin.photo_coin.url }}" alt="" width="185" height="185" loading="lazy">
                        </picture>
                    </div>
                    <div class="coin__header-info">
                        <h2 class="coin__title title">
                            {{ coin.coin_name }}
                        </h2>
                        <span class="coin__name">
							{{ coin.coin_symbol }}
						</span>
                        <span class="coin__category name-section">
							{{ coin.category }}
						</span>
                    </div>
                    <div class="coin__vote">
                        <span class="coin__vote--today">Today's Vote: {{ coin.votes_today }}</span>
                        <td>

                            <a href="#{% if not user.is_authenticated %}authorization-popup{% endif %}"
                               class="{% if coin not in user.vote_coins.all %}canVote{% endif %} vote-btn btn {% if not user.is_authenticated %}open-popup{% endif %}"
                               type="button" data-coin-pk="{{ coin.pk }}">
                                {% if coin not in user.vote_coins.all %}
                                    <div class="arrow">
                                        <svg width="10" height="14" viewBox="0 0 10 14">
                                            <use xlink:href="{% static 'img/sprites.svg' %}#arrow-to-up"></use>
                                        </svg>
                                    </div>
                                {% endif %}
                                {{ coin.votes_today }}
                            </a>

                            <script type="text/javascript">
                                $('.canVote').click(function (e) {
                                    e.preventDefault();

                                    $.ajax({
                                        type: "GET",
                                        url: "{% url 'core:vote_coin' %}",
                                        data: {
                                            "coin": $(this).attr('data-coin-pk'),
                                        },
                                        success: function (data) {
                                        }
                                    });
                                });
                            </script>

                    </div>
                </div>
                <div class="coin__main">
                    <div class="coin__chain">
                        <div class="coin__chain--block">
                            <div class="coin__chain--avatar">
                                <img src="{{ coin.network_chain.photo.url }}" width="40" height="40" loading="lazy"
                                     alt="">
                            </div>
                            <h3 class="coin__chain--title title _min-2">
                                {{ coin.network_chain.name }} Chain
                            </h3>
                            <div class="coin__chain--address">
                                <label>
                                    <input type="text" name="wallet" id="chain" readonly
                                           value="{{ coin.binance_smart_chain }}">
                                </label>
                                <button type="button" title="Copy" data-clipboard-target="#chain">
                                    <svg width="16" height="16" viewBox="0 0 16 16">
                                        <use xlink:href="{% static 'img/sprites.svg' %}#copy"></use>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="coin__chain--footer">
                            <div class="coin__social">
                                <ul>
                                    {% if coin.website_link %}
                                        <li>
                                            <a href="{{ coin.website_link }}" target="_blank">
                                                <svg width="16" height="17" viewBox="0 0 16 17">
                                                    <use xlink:href="{% static 'img/sprites.svg' %}#link"></use>
                                                </svg>
                                                {% trans "Website" %}
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if coin.twitter_link %}
                                        <li>
                                            <a href="{{ coin.twitter_link }}" target="_blank">
                                                <svg width="16" height="17" viewBox="0 0 16 17">
                                                    <use xlink:href="{% static 'img/sprites.svg' %}#twitter"></use>
                                                </svg>
                                                {% trans "Twitter" %}
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if coin.telegram_link %}
                                        <li>
                                            <a href="{{ coin.telegram_link }}" target="_blank">
                                                <svg width="16" height="17" viewBox="0 0 16 17">
                                                    <use xlink:href="{% static 'img/sprites.svg' %}#telegram"></use>
                                                </svg>
                                                {% trans "Telegram" %}
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if coin.discord_link %}
                                        <li>
                                            <a href="{{ coin.discord_link }}" target="_blank">
                                                <svg width="16" height="17" viewBox="0 0 16 17">
                                                    <use xlink:href="{% static 'img/sprites.svg' %}#discord"></use>
                                                </svg>
                                                {% trans "Discord" %}
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="coin__descr">
                        <h3 class="coin__descr--title">
                            <svg width="16" height="16" viewBox="0 0 18 18" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M3.54539 2.03433C3.77443 1.80993 4.09601 1.66362 4.70327 1.58363C5.32839 1.50129 6.1569 1.5 7.34483 1.5H10.6552C11.8431 1.5 12.6716 1.50129 13.2967 1.58363C13.904 1.66362 14.2256 1.80993 14.4546 2.03433C14.6837 2.25873 14.833 2.57379 14.9146 3.16875C14.9987 3.78119 15 4.59291 15 5.75676V11.6351L5.50922 11.6351C4.83229 11.6349 4.37037 11.6347 3.97424 11.7387C3.62005 11.8317 3.29151 11.9836 3 12.1832V5.75676C3 4.59291 3.00132 3.78119 3.08536 3.16875C3.16701 2.57379 3.31634 2.25873 3.54539 2.03433ZM5.68966 4.33784C5.34686 4.33784 5.06897 4.6101 5.06897 4.94595C5.06897 5.28179 5.34686 5.55405 5.68966 5.55405H12.3103C12.6531 5.55405 12.931 5.28179 12.931 4.94595C12.931 4.6101 12.6531 4.33784 12.3103 4.33784H5.68966ZM5.06897 7.78378C5.06897 7.44793 5.34686 7.17568 5.68966 7.17568H9.82759C10.1704 7.17568 10.4483 7.44793 10.4483 7.78378C10.4483 8.11963 10.1704 8.39189 9.82759 8.39189H5.68966C5.34686 8.39189 5.06897 8.11963 5.06897 7.78378Z"
                                      fill="#4E535C"/>
                                <path d="M5.60506 12.8514C4.79546 12.8514 4.51243 12.8566 4.29553 12.9135C3.70023 13.0698 3.22566 13.5033 3.02214 14.0668C3.03472 14.3537 3.05445 14.606 3.08536 14.8313C3.16701 15.4262 3.31634 15.7413 3.54539 15.9657C3.77443 16.1901 4.09601 16.3364 4.70327 16.4164C5.32839 16.4987 6.1569 16.5 7.34483 16.5H10.6552C11.8431 16.5 12.6716 16.4987 13.2967 16.4164C13.904 16.3364 14.2256 16.1901 14.4546 15.9657C14.6171 15.8065 14.7394 15.6017 14.826 15.2838H5.68966C5.34686 15.2838 5.06897 15.0115 5.06897 14.6757C5.06897 14.3398 5.34686 14.0676 5.68966 14.0676H14.9778C14.9932 13.7181 14.9979 13.3173 14.9994 12.8514H5.60506Z"
                                      fill="#4E535C"/>
                            </svg>
                            {% trans "Description" %}
                        </h3>
                        <div class="coin__descr--text">
                            <p>
                                {{ coin.coin_description }}
                            </p>
                        </div>
                    </div>
                    <ul class="coin__min-info">
                        <li class="coin__min-info--element">
							<span>
								{% trans "Marketcap" %}
							</span>
                            <b>{{ coin.market_cap }}</b>
                        </li>
                        <li class="coin__min-info--element">
							<span>
								{% trans "Price" %}
							</span>
                            <b>${{ coin.price }}</b>
                        </li>
                        <li class="coin__min-info--element">
							<span>
								{% trans "Launch Date" %}
							</span>
                            <b>{{ coin.publish_date }}</b>
                        </li>
                        <li class="coin__min-info--element">
							<span>
								24H
							</span>
                            {% if coin.price_24h > 0 %}
                                <b class="grow-value">
                                    <svg width="16" height="16" viewBox="0 0 16 16">
                                        <use xlink:href="{% static 'img/sprites.svg' %}#arrow-grow"></use>
                                    </svg>
                                    {{ coin.price_24h }}%
                                </b>
                            {% else %}
                                <b class="danger-value">
                                    <svg width="16" height="16" viewBox="0 0 16 16">
                                        <use xlink:href="{% static 'img/sprites.svg' %}#arrow-grow"></use>
                                    </svg>
                                    {{ coin.price_24h }}%
                                </b>
                            {% endif %}
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        {% with promoted as listing %}
            {% include 'include/full_coin_table.html' %}
        {% endwith %}

    </main>

{% endblock %}