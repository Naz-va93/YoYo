document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("progressBar"),e=parseFloat(t.getAttribute("data-current-price")),i=document.getElementById("coin__converter-from"),o=document.getElementById("coin__converter-to"),a=parseFloat(o.value.replace(",",".").replace(" ","")),r=document.getElementById("todayLowPrice"),n=document.getElementById("todayHighPrice");function l(t){if("string"==typeof t&&(t=parseFloat(t)),0===t)return"0";let e=Math.abs(t),i=2;0!==e&&e<1&&(i=-Math.floor(Math.log10(e))+2);let o=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i});return o.replace(/(\.\d*[1-9])0+$|\.0*$/,"$1")}o.value=l(a),i.addEventListener("input",function(){(function t(){let e=parseFloat(i.getAttribute("data-coin-price-usd").replace(",",".").replace(" ","")),a=i.value.replace(",","."),r=a?parseFloat(a):0;o.value=l(r*e)})()});let s=document.querySelector(".coin__trading--coin__info"),c=document.querySelector(".coin__chart"),d=document.querySelectorAll(".coin__tab.market_price"),p=document.getElementById("coin__tab-container-history_price");d.forEach(t=>{t.addEventListener("click",function(e){!function t(e,i,o){1===i&&(c.classList.add("visually-hidden"),p.classList.add("visually-hidden"),s.classList.remove("visually-hidden")),0===i&&(s.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),p.classList.remove("visually-hidden")),e.forEach(t=>{t.classList.remove("active")}),o.target.classList.add("active");let a=o.target.offsetWidth;document.querySelector(".coin__slider").style.transform=`translateX(${i*a}px)`}(d,parseInt(t.getAttribute("data-index")),e)})});let m=document.querySelectorAll(".coin__tab.history_price"),u=null;m.forEach(i=>{i.addEventListener("click",function(o){(function i(o,a,s,c,d){a.forEach(t=>{t.classList.remove("active")}),o.target.classList.add("active");let p=document.querySelector(".coin__chart-wrapper.period"),m=p.querySelector("canvas");m&&(u&&u.destroy(),p.removeChild(m)),(m=document.createElement("canvas")).id="coinChartHistoryPrice",p.appendChild(m);let y=m.getContext("2d"),h=y.createLinearGradient(0,0,0,400);h.addColorStop(0,"rgba(30, 116, 254, 0.4)"),h.addColorStop(.78966,"rgba(30, 116, 254, 0)"),fetch(`https://coinyoyo.io/coin-price-history?coinId=${c}&type=${d}&period=${s}`).then(t=>t.json()).then(i=>{if(y.clearRect(0,0,m.width,m.height),"success"===i.status){let o=i.data.history;o.sort((t,e)=>t.timestamp-e.timestamp);let a=o.map(t=>t.price),c=o.map(t=>{let e=new Date(1e3*t.timestamp);return"24h"===s?e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):e.toLocaleDateString("en-GB")});if(u=new Chart(y,{type:"line",data:{labels:c,datasets:[{data:a,borderColor:"#3c86fe",borderWidth:2,fill:!0,pointRadius:0,pointHoverRadius:0,lineTension:.1,backgroundColor:h}]},options:{responsive:!1,animation:{duration:0},interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1,displayColors:!1,callbacks:{label:function(t){return l(t.raw)}}},crosshair:{line:{color:"#282b31",width:1},zoom:{enabled:!1}}},scales:{y:{ticks:{color:"rgb(148, 149, 152)",font:{family:"Commissioner",size:12},callback:function(t){return void 0!==t?l(t):""}},beginAtZero:!1,position:"right",border:{display:!1},grid:{color:"#949598",lineWidth:.6}},x:{ticks:{align:"start",autoSkip:!0,maxTicksLimit:6,color:"rgb(148, 149, 152)",font:{family:"Commissioner",size:12},padding:0,maxRotation:0,minRotation:0},grid:{display:!1}}}}}),"24h"===s){if(minPrice=Math.min(...a),maxPrice=Math.max(...a),r.textContent=`$${minPrice?l(minPrice):"--"}`,n.textContent=`$${maxPrice?l(maxPrice):"--"}`,maxPrice-minPrice!=0){let d=(e-minPrice)/(maxPrice-minPrice)*100;t.style.width=`${d}%`}else t.style.width="0%"}}else y.fillText("Error loading data",m.width/2-50,m.height/2)}).catch(t=>{console.error("Error fetching data:",t),y.fillText("Error loading data",m.width/2-50,m.height/2)})})(o,m,i.getAttribute("data-period"),i.getAttribute("data-coin-api-id"),i.getAttribute("data-coin-api-type"))})}),document.querySelector('.coin__tab.history_price[data-period="24h"]').click();let y=document.querySelector(".coin__tab.history_price.all_time"),h=y.getAttribute("data-coin-api-id"),g=y.getAttribute("data-coin-api-type"),$=document.getElementById("coinChartAllHistoryPrice"),_=$.getContext("2d");$.height=80,fetch(`https://coinyoyo.io/coin-price-history?coinId=${h}&type=${g}&period=all`).then(t=>t.json()).then(t=>{if("success"===t.status){let e=t.data.history;e.sort((t,e)=>t.timestamp-e.timestamp);let i=e.map(t=>t.price),o=e.map(t=>new Date(1e3*t.timestamp).getFullYear());allTimeChart=new Chart(_,{type:"line",data:{labels:o,datasets:[{data:i,borderColor:"#3c86fe",borderWidth:2,fill:!1,pointRadius:0,pointHoverRadius:0,lineTension:.1}]},options:{animation:{duration:0},interaction:{mode:"nearest",axis:"x",intersect:!1},tooltip:{enabled:!1},responsive:!0,maintainAspectRatio:!1,scales:{y:{display:!0,position:"right",grid:{display:!1},ticks:{color:"transparent",font:{family:"Commissioner",size:12}},border:{display:!1}},x:{ticks:{align:"start",autoSkip:!0,maxTicksLimit:6,color:"rgb(148, 149, 152)",font:{family:"Commissioner",size:12}},grid:{color:"#5b5c61",lineWidth:.4},border:{color:"#5b5c61",width:.4}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},crosshair:!1}}})}})});